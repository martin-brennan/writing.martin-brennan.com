---
id: 479
title: Could not successfully convert UCS-2 string to UTF-8
date: 2014-06-06T07:17:24+10:00
author: Martin Brennan
layout: post
guid: http://www.martin-brennan.com/?p=479
permalink: /could-not-successfully-convert-ucs-2-string-to-utf-8/
dsq_thread_id:
  - 2760240867
mashsb_shares:
  - 0
mashsb_timestamp:
  - 1465004152
mashsb_jsonshares:
  - '{"total":0}'
categories:
  - Aha!
  - Development
tags:
  - encoding
  - freetds
  - mssql
  - mySQL
  - utf-8
---

{% include deprecated.html message="I have no idea how to actually get and install the FreeTDS drivers, I think they may have already been installed on the AWS Instance AMI we were using at the time." cssclass="deprecated" %}

We were performing a massive data migration at work from MSSQL to MySQL using the Migration Wizard in [MySQL Workbench](http://www.mysql.com/products/workbench/). When performing the step that copied the data from one server to the other, we got the following error for some `nvarchar` columns:

> Could not successfully convert UCS-2 string to UTF-8

Or alternatively, we also got `Error during charset conversion of wstring: No error`. This infuriating error took us an hour and a half to diagnose and work around. I finally stumbled upon this link to a bug on the MySQL bugs website relating to MySQL Workbench [http://bugs.mysql.com/bug.php?id=69629](http://bugs.mysql.com/bug.php?id=69629).

The problem, it turns out, lays with Microsoft&#8217;s ODBC Drivers:

> This bug is triggered due to improper UCS-2 strings being generated by Microsoft&#8217;s ODBC drivers.

And the solution is to select the [FreeTDS](http://www.freetds.org/) ODBC Drivers in the first step of the migration wizard of MySQL Workbench. The migration then works perfectly with no further encoding complaints. I hope this helps someone else out with this frustrating problem!

![FreeTDS](/images/freetds.png)
